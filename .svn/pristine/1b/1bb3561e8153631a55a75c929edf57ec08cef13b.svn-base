package Networks;

import javafx.application.Platform;
import javafx.scene.control.Slider;
import javafx.scene.media.MediaPlayer;
import javafx.util.Duration;


public class ProgressBarSyn {
	static double progress = 0;
	static String macAddrString = "10.115.193.30";
	static String linuxAddrString = "10.115.209.74";
	static String localAddrString = "127.0.0.1";
	
	static int serverPort = 15126;
	static int clientPort = 15124;
	
	static Receiver receiver = null;
	static Sender sender = null;

	static MediaPlayer mediaPlayer = null;
	
	public ProgressBarSyn(){
		Thread thread = new Thread(new ReceiverThreaded());
		thread.start();
		sender = new Sender();
	}
	
	
	static double getProgress(){
		return progress;
	}
	
	public static void sendProgress(double progress0){
		System.out.println("set Progress");
		sender.send(progress0);
	}
	
	public static void receiveProgress(String senderAddr, double progress0){
		if(mediaPlayer != null & !senderAddr.equals(macAddrString)){
			Platform.runLater(new Runnable(){

				@Override
				public void run() {
					
					Duration duration = mediaPlayer.getMedia().getDuration();
                	mediaPlayer.seek(duration.multiply(progress0 / 100.0));
					
				}
				
			});
		}
	}

	public void setMediaPlayer(MediaPlayer mp) {
		mediaPlayer = mp;
		
	}
	

}
